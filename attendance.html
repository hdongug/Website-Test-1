<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²Œì„ ê±°ë˜ì†Œ - ì¶œì„ì²´í¬</title>
  <!-- ê³µí†µ ì•„ì´í…œ ë°ì´í„° ë¡œë“œ (ìºì‹± ë°©ì§€) -->
  <script src="/js/itemsData.js?v=1.1"></script>
  <!-- ì¸ì¦ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì‹¤ì‹œê°„ ë¡œê·¸ì¸ ìƒíƒœ ë™ê¸°í™” -->
  <script src="/js/auth.js?v=1.0"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    body {
      font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
      background-color: #f8f9fa;
      color: #333;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    
    /* ì•„ì´ì½˜ í¬ê¸° ì œí•œ */
    svg {
      max-width: 24px;
      max-height: 24px;
      width: 24px;
      height: 24px;
    }
    
    /* ë³´ìƒ ì„¹ì…˜ì˜ ì‘ì€ ì•„ì´ì½˜ */
    .reward-icon {
      font-size: 20px;
      display: inline-block;
      width: 30px;
      height: 30px;
      line-height: 30px;
      text-align: center;
      margin-right: 10px;
    }
    
    /* ëª¨ë‹¬ì˜ ì´ëª¨í‹°ì½˜ í¬ê¸° */
    .modal-icon {
      font-size: 36px;
      margin-bottom: 15px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }
    
    /* í—¤ë” */
    header {
      background-color: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 15px 0;
      margin-bottom: 20px;
    }
    
    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      color: #333;
      font-weight: bold;
      font-size: 18px;
    }
    
    .logo svg {
      margin-right: 10px;
    }
    
    .main-nav ul {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    
    .main-nav li {
      margin-left: 20px;
    }
    
    .main-nav a {
      text-decoration: none;
      color: #555;
      font-weight: 500;
    }
    
    .main-nav a.active {
      color: #4569d4;
    }
    
    /* ì¶œì„ ì•Œë¦¼ë°•ìŠ¤ */
    .attendance-alert {
      display: flex;
      align-items: center;
      background-color: #e8f5e9;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
    }
    
    .attendance-alert svg {
      margin-right: 16px;
      flex-shrink: 0;
    }
    
    /* ìº˜ë¦°ë” ì„¹ì…˜ */
    .calendar-section {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    
    /* ìº˜ë¦°ë” í—¤ë” */
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .month-nav {
      display: flex;
      align-items: center;
    }
    
    .month-display {
      font-size: 20px;
      font-weight: bold;
      margin: 0 15px;
    }
    
    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn {
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background-color: #4569d4;
      color: white;
      border: none;
    }
    
    .btn-primary:hover {
      background-color: #3a5bc0;
    }
    
    .btn-outline {
      background-color: white;
      border: 1px solid #ddd;
      color: #555;
    }
    
    .btn-outline:hover {
      background-color: #f5f5f5;
    }
    
    /* ì„ íƒ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
    .select-box {
      padding: 8px 12px;
      border-radius: 4px;
      border: 1px solid #ddd;
      font-size: 14px;
      background-color: white;
      cursor: pointer;
      margin-right: 8px;
    }
    
    /* ìº˜ë¦°ë” í…Œì´ë¸” */
    .calendar-table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }
    
    .calendar-table th {
      padding: 10px;
      text-align: center;
      font-weight: 500;
      border-bottom: 1px solid #eee;
    }
    
    .calendar-table th.sun {
      color: #e74c3c;
    }
    
    .calendar-table th.sat {
      color: #3498db;
    }
    
    .calendar-table td {
      padding: 0;
      border: 1px solid #eee;
      height: 100px; /* ëª¨ë“  ì…€ ë™ì¼í•œ í¬ê¸° */
      width: calc(100% / 7); /* ì „ì²´ ë„ˆë¹„ì˜ 1/7 */
      position: relative; /* ë‚ ì§œì™€ ì²´í¬í‘œì‹œ ë°°ì¹˜ë¥¼ ìœ„í•œ ê¸°ì¤€ì  */
      vertical-align: top;
      transition: background-color 0.2s;
    }
    
    .calendar-table td:hover {
      background-color: #f9f9f9;
    }
    
    .date-number {
      font-size: 16px;
      font-weight: 500;
      position: absolute;
      top: 5px;
      left: 8px;
      margin: 0;
    }
    
    /* ì¶œì„ì²´í¬ í‘œì‹œ ìŠ¤íƒ€ì¼ */
    .attendance-check {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 32px;
      color: #4caf50;
      z-index: 1;
    }
    
    td.sun .date-number {
      color: #e74c3c;
    }
    
    td.sat .date-number {
      color: #3498db;
    }
    
    td.today {
      background-color: #e3f2fd;
      border: 1px solid #90caf9;
    }
    
    td.other-month .date-number {
      color: #bbb;
    }
    
    /* ì¶œì„ì²´í¬ í‘œì‹œ */
    td.checked::after {
      content: 'âœ“';
      display: block;
      width: 24px;
      height: 24px;
      background-color: #4569d4;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 24px;
      margin: 5px auto 0;
      font-weight: bold;
    }
    
    /* ì¶œì„ì²´í¬ ë²„íŠ¼ ì˜ì—­ */
    .check-in-area {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #eee;
      text-align: center;
    }
    
    /* ì¶œì„ ì¢…ë¥˜ì— ë”°ë¥¸ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
    .attendance-icon {
      width: 30px;
      height: 30px;
      margin-right: 10px;
    }
    
    .attendance-status {
      margin-top: 10px;
      color: #666;
      font-size: 14px;
    }
    
    .streak-count {
      font-weight: bold;
      color: #4569d4;
    }
    
    /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ìŠ¤íƒ€ì¼ */
    .dropdown-menu {
      position: relative;
      display: inline-block;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background-color: white;
      min-width: 160px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      border-radius: 0.375rem;
      z-index: 10;
      margin-top: 0.5rem;
    }
    
    .dropdown-content.show, #userDropdown.show {
      display: block !important;
    }
    
    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #333;
      padding: 12px 16px;
      text-decoration: none;
      border-bottom: 1px solid #e5e7eb;
      transition: background-color 0.2s;
    }
    
    .dropdown-item:last-child {
      border-bottom: none;
    }
    
    .dropdown-item:hover {
      background-color: #f3f4f6;
    }
    
    .dropdown-item svg {
      margin-right: 8px;
      width: 18px;
      height: 18px;
    }
    
    /* ë³´ìƒ ì„¹ì…˜ */
    .rewards-section {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    
    .reward-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid #eee;
    }
    
    .reward-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .reward-day {
      width: 36px;
      height: 36px;
      background-color: #fff3e0;
      color: #f57c00;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-right: 12px;
      flex-shrink: 0;
    }
    
    .reward-content {
      flex: 1;
    }
    
    .reward-title {
      font-weight: bold;
      margin-bottom: 2px;
    }
    
    .reward-description {
      font-size: 14px;
      color: #666;
    }
    
    /* ì´ë¯¸ì§€ í¬ê¸° ì œí•œ */
    img, svg {
      max-width: 100%;
      height: auto;
    }
    
    /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ìŠ¤íƒ€ì¼ */
    .menu-dropdown {
      position: relative;
      display: inline-block;
    }
    
    .menu-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      color: #555;
      border-radius: 4px;
      display: flex;
      align-items: center;
      transition: all 0.2s;
    }
    
    .menu-btn:hover {
      background-color: #f0f0f0;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background-color: white;
      min-width: 180px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      border-radius: 4px;
      z-index: 1000;
      overflow: hidden;
    }
    
    .dropdown-content.show {
      display: block;
      animation: fadeIn 0.2s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .dropdown-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      text-decoration: none;
      color: #333;
      transition: all 0.2s;
    }
    
    .dropdown-item svg {
      margin-right: 8px;
    }
    
    .dropdown-item:hover {
      background-color: #f5f7fa;
    }
    
    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 768px) {
      .calendar-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .month-selectors {
        margin-top: 10px;
      }
      
      .calendar-table td {
        height: 60px;
        padding: 5px;
      }
      
      .date-number {
        font-size: 14px;
      }
    }
    /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ìŠ¤íƒ€ì¼ */
    .dropdown-content {
      display: none;
      position: absolute;
      right: 15px;
      top: 55px;
      background-color: white;
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      min-width: 200px;
      z-index: 100;
    }
    
    .dropdown-content.show {
      display: block;
    }
    
    .dropdown-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      text-decoration: none;
      color: #333;
      border-bottom: 1px solid #f1f1f1;
      transition: background-color 0.2s;
    }
    
    .dropdown-item:hover {
      background-color: #f5f5f5;
    }
    
    .dropdown-item svg {
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <!-- í—¤ë” -->
  <header class="site-header" style="background-color: #673ab7; color: white;">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center py-3">
        <a href="index.html" class="flex items-center">
          <h1 class="text-xl font-bold">ê²Œì„ ê±°ë˜ì†Œ í™ˆ</h1>
        </a>
        
        <!-- ìƒë‹¨ ë©”ë‰´ -->
        <div class="flex items-center space-x-5 text-sm">
          <a href="market.html" class="text-white hover:text-gray-200">ê±°ë˜ì†Œ</a>
          <a href="board.html" class="text-white hover:text-gray-200">ê²Œì‹œíŒ</a>
          <a href="attendance.html" class="text-white hover:text-gray-200 font-bold">ì¶œì„ì²´í¬</a>
          <a href="profile.html" class="text-white hover:text-gray-200" id="profileLink">í”„ë¡œí•„</a>
          <a href="login.html" class="text-white hover:text-gray-200 hidden" id="loginBtn">ë¡œê·¸ì¸</a>
          <div id="userCurrencyDisplay" class="text-white px-2 py-1 rounded bg-purple-800 hidden"></div>
          <button id="menuButton" class="text-white hover:text-gray-200">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- ë“œë¡­ë‹¤ìš´ ë©”ë‰´ -->
  <div id="userDropdown" class="dropdown-content" style="display: none; position: absolute; right: 15px; top: 55px; background-color: white; border-radius: 4px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); min-width: 200px; z-index: 1000;">
    <a href="market.html" class="dropdown-item" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f1f1f1;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 0v10"></path>
      </svg>
      ê±°ë˜ì†Œ
    </a>
    <a href="board.html" class="dropdown-item" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f1f1f1;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
      </svg>
      ê²Œì‹œíŒ
    </a>
    <a href="attendance.html" class="dropdown-item" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f1f1f1;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
      </svg>
      ì¶œì„ì²´í¬
    </a>
    <a href="profile.html" class="dropdown-item" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f1f1f1;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 10px;">
        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg>
      ì‚¬ìš©ìì •ë³´
    </a>
    <a href="inventory.html" class="dropdown-item" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f1f1f1;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 10px;">
        <path d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
      </svg>
      ì¸ë²¤í† ë¦¬
    </a>
    <a href="#" id="logoutBtn" class="dropdown-item" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #333; border-bottom: 1px solid #f1f1f1;">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 10px;">
        <path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
      </svg>
      ë¡œê·¸ì•„ì›ƒ
    </a>
    </div>
  </div>

  <main class="container">
    <!-- ì¶œì„ ì•Œë¦¼ë°•ìŠ¤ -->
    <div class="attendance-alert">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4caf50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <div>
        <h3 style="margin: 0 0 5px 0; font-size: 16px;">ì˜¤ëŠ˜ì˜ ì¶œì„ì²´í¬ë¥¼ ì™„ë£Œí•˜ì„¸ìš”</h3>
        <p style="margin: 0; font-size: 14px;">ë§¤ì¼ ì¶œì„ì²´í¬ë¥¼ í•˜ë©´ íŠ¹ë³„í•œ ë³´ìƒì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ë ˆì´ì•„ì›ƒ -->
    <div style="display: flex; flex-wrap: wrap; gap: 20px;">
      <!-- ìº˜ë¦°ë” ì„¹ì…˜ -->
      <div class="calendar-section" style="flex: 1; min-width: 300px;">
        <!-- ì¶œì„ì²´í¬ ë²„íŠ¼ ìƒë‹¨ ë°°ì¹˜ -->
        <div style="margin-bottom: 20px;">
          <button id="checkInButton" class="btn btn-primary" style="width: 100%; padding: 12px; background-color: #4569d4; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;">
            ì˜¤ëŠ˜ ì¶œì„ì²´í¬í•˜ê¸°
          </button>
          <div class="attendance-status" style="margin-top: 10px; text-align: center; font-size: 14px; color: #555;">
            í˜„ì¬ ì—°ì† ì¶œì„: <span id="streakCount" class="streak-count" style="font-weight: bold; color: #4569d4;">0</span>ì¼
          </div>
        </div>
        
        <!-- ìº˜ë¦°ë” í—¤ë” -->
        <div class="calendar-header">
          <div class="month-nav" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
            <button id="prevMonth" class="btn btn-outline" style="padding: 8px 12px; background: transparent; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">
              ì´ì „ ë‹¬
            </button>
            <button id="nextMonth" class="btn btn-outline" style="padding: 8px 12px; background: transparent; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">
              ë‹¤ìŒ ë‹¬
            </button>
          </div>
          
          <div class="month-selectors" style="display: flex; gap: 10px; margin-bottom: 15px;">
            <select id="yearSelect" class="select-box" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; flex-grow: 1;">
              <!-- JavaScriptë¡œ ì˜µì…˜ ì¶”ê°€ -->
            </select>
            <select id="monthSelect" class="select-box" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; flex-grow: 1;">
              <option value="0">1ì›”</option>
              <option value="1">2ì›”</option>
              <option value="2">3ì›”</option>
              <option value="3">4ì›”</option>
              <option value="4">5ì›”</option>
              <option value="5">6ì›”</option>
              <option value="6">7ì›”</option>
              <option value="7">8ì›”</option>
              <option value="8">9ì›”</option>
              <option value="9">10ì›”</option>
              <option value="10">11ì›”</option>
              <option value="11">12ì›”</option>
            </select>
          </div>
        </div>
        
        <!-- ìº˜ë¦°ë” í…Œì´ë¸” -->
        <table class="calendar-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
          <thead>
            <tr>
              <th class="sun" style="padding: 10px; text-align: center; font-weight: 500; color: #e53935;">ì¼</th>
              <th style="padding: 10px; text-align: center; font-weight: 500;">ì›”</th>
              <th style="padding: 10px; text-align: center; font-weight: 500;">í™”</th>
              <th style="padding: 10px; text-align: center; font-weight: 500;">ìˆ˜</th>
              <th style="padding: 10px; text-align: center; font-weight: 500;">ëª©</th>
              <th style="padding: 10px; text-align: center; font-weight: 500;">ê¸ˆ</th>
              <th class="sat" style="padding: 10px; text-align: center; font-weight: 500; color: #1e88e5;">í† </th>
            </tr>
          </thead>
          <tbody id="calendarBody">
            <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
          </tbody>
        </table>
        
        <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div style="margin-top: 20px; text-align: center; font-size: 14px; color: #777;">
          ë§¤ì¼ ìì •ì— ì¶œì„ì²´í¬ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
        </div>
      </div>

      <!-- ë³´ìƒ ì„¹ì…˜ -->
      <div class="rewards-section" style="flex: 1; min-width: 300px; background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); padding: 20px;">
        <div class="section-title" style="font-size: 18px; font-weight: bold; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee;">ì¶œì„ ë³´ìƒ</div>
        
        <div class="reward-item" style="display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f1f1f1;">
          <div class="reward-day" style="flex: 0 0 100px; font-weight: 500; color: #4569d4;">ë§¤ì¼ ì¶œì„</div>
          <div class="reward-detail" style="flex: 1;">
            <div style="font-weight: 500; white-space: nowrap;">ì¬í™” +100,000</div>
          </div>
          <div class="reward-icon" style="color: #ffc107; font-size: 20px; width: auto; height: auto; text-align: center;">â­</div>
        </div>
        
        <div class="reward-item" style="display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f1f1f1;">
          <div class="reward-day" style="flex: 0 0 100px; font-weight: 500; color: #4569d4;">7ì¼ ì—°ì†</div>
          <div class="reward-detail" style="flex: 1;">
            <div style="font-weight: 500; white-space: nowrap;">ì¬í™” +200,000 + ëœë¤ ì¬í™” ë°•ìŠ¤</div>
          </div>
          <div class="reward-icon" style="color: #4caf50; font-size: 20px; width: auto; height: auto; text-align: center;">ğŸ</div>
        </div>
        
        <div class="reward-item" style="display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f1f1f1;">
          <div class="reward-day" style="flex: 0 0 100px; font-weight: 500; color: #4569d4;">15ì¼ ì—°ì†</div>
          <div class="reward-detail" style="flex: 1;">
            <div style="font-weight: 500; white-space: nowrap;">ì¬í™” +300,000 + ëœë¤ ì¬í™” ë°•ìŠ¤</div>
          </div>
          <div class="reward-icon" style="color: #9c27b0; font-size: 20px; width: auto; height: auto; text-align: center;">ğŸ</div>
        </div>
        
        <div class="reward-item" style="display: flex; align-items: center; padding: 15px 0;">
          <div class="reward-day" style="flex: 0 0 100px; font-weight: 500; color: #4569d4;">30ì¼ ì—°ì†</div>
          <div class="reward-detail" style="flex: 1;">
            <div style="font-weight: 500; white-space: nowrap;">ì¬í™” +500,000 + ëœë¤ ì¬í™” ë°•ìŠ¤</div>
          </div>
          <div class="reward-icon" style="color: #ff5722; font-size: 20px; width: auto; height: auto; text-align: center;">ğŸ</div>
        </div>
        
        <!-- ëœë¤ ì¬í™” ë°•ìŠ¤ í™•ë¥  ì„¤ëª… -->
        <div style="margin-top: 20px; padding: 15px; background-color: #f9f9f9; border-radius: 4px;">
          <div style="font-weight: 500; margin-bottom: 10px; color: #333;">ëœë¤ ì¬í™” ë°•ìŠ¤ í™•ë¥  ì •ë³´</div>
          <div style="font-size: 13px; color: #666;">
            <div style="margin-bottom: 5px;"><span style="font-weight: 500; color: #4569d4;">40%</span> í™•ë¥ ë¡œ <span style="font-weight: 500;">100,000</span> ì¬í™”</div>
            <div style="margin-bottom: 5px;"><span style="font-weight: 500; color: #4569d4;">30%</span> í™•ë¥ ë¡œ <span style="font-weight: 500;">200,000</span> ì¬í™”</div>
            <div style="margin-bottom: 5px;"><span style="font-weight: 500; color: #4569d4;">20%</span> í™•ë¥ ë¡œ <span style="font-weight: 500;">300,000</span> ì¬í™”</div>
            <div style="margin-bottom: 5px;"><span style="font-weight: 500; color: #4569d4;">9%</span> í™•ë¥ ë¡œ <span style="font-weight: 500;">400,000</span> ì¬í™”</div>
            <div><span style="font-weight: 500; color: #ff5722;">1%</span> í™•ë¥ ë¡œ <span style="font-weight: 500;">500,000</span> ì¬í™”</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // DOM ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
    function ready(fn) {
      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        setTimeout(fn, 1);
      } else {
        document.addEventListener('DOMContentLoaded', fn);
      }
    }
    
    ready(function() {
      // DOM ìš”ì†Œ ì°¸ì¡°
      const menuButton = document.getElementById('menuButton');
      const userDropdown = document.getElementById('userDropdown');
      
      console.log('ë©”ë‰´ ë²„íŠ¼ ì°¸ì¡°:', menuButton);
      console.log('ë“œë¡­ë‹¤ìš´ ì°¸ì¡°:', userDropdown);
      
      // ì‚¬ìš©ì ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬
      const user = JSON.parse(localStorage.getItem('user') || 'null');
      const loginBtn = document.getElementById('loginBtn');
      let logoutBtn = document.getElementById('logoutBtn');
      let profileLink = document.getElementById('profileLink');
      
      if (user) {
        // ë¡œê·¸ì¸ ìƒíƒœì¸ ê²½ìš°
        if (loginBtn) loginBtn.classList.add('hidden');
        if (profileLink) profileLink.classList.remove('hidden');

        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸
        if (logoutBtn) {
          logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('user');
            alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
            window.location.reload();
          });
        }
      } else {
        // ë¹„ë¡œê·¸ì¸ ìƒíƒœì¸ ê²½ìš°
        if (loginBtn) loginBtn.classList.remove('hidden');
        if (profileLink) profileLink.classList.add('hidden');
      }
      
      // ë©”ë‰´ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
      if (menuButton) {
        menuButton.addEventListener('click', function(e) {
          console.log('ë©”ë‰´ ë²„íŠ¼ í´ë¦­ë¨!');
          e.preventDefault();
          e.stopPropagation();
          if (userDropdown) {
            // display ì†ì„± ì§ì ‘ ì¡°ì ˆ (classList.toggle ëŒ€ì‹ )
            if (userDropdown.style.display === 'none' || userDropdown.style.display === '') {
              userDropdown.style.display = 'block';
            } else {
              userDropdown.style.display = 'none';
            }
          }
        });
      }
      
      // ì™¸ë¶€ ì˜ì—­ í´ë¦­ ì‹œ ë©”ë‰´ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
      document.addEventListener('click', function(e) {
        if (userDropdown && userDropdown.style.display === 'block') {
          // í´ë¦­ëœ ìš”ì†Œê°€ ë©”ë‰´ ë²„íŠ¼ì´ë‚˜ ë“œë¡­ë‹¤ìš´ ë‚´ë¶€ê°€ ì•„ë‹Œ ê²½ìš° ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
          if (!menuButton.contains(e.target) && !userDropdown.contains(e.target)) {
            userDropdown.style.display = 'none';
          }
        }
      });
      
      console.log('ë©”ë‰´ ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ');
      
      // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸ ì²˜ë¦¬
      // ì¤‘ë³µ ì„ ì–¸ ì˜¤ë¥˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ì´ë¯¸ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸ë¥¼ ìœ„ì—ì„œ ì²˜ë¦¬í–ˆìœ¼ë‹ˆ ì—¬ê¸°ì„œëŠ” ì œì™¸
      
      // ì¶œì„ì²´í¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
      initializeAttendanceSystem();
    });

    // ì „ì—­ ë³€ìˆ˜
    const today = new Date();
    today.setHours(12, 0, 0, 0); // ì •í™•í•œ ë‚ ì§œ ë¹„êµë¥¼ ìœ„í•´ ì‹œê°„ ê³ ì •
    
    // í˜„ì¬ ì—°ë„ì™€ ì›” ì €ì¥
    let currentYear = today.getFullYear();
    let currentMonth = today.getMonth();
    
    // ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ë¡œì»¬ ìŠ¤í† ë¦¬ì§€)
    function getUserData() {
      const savedUserData = localStorage.getItem('user');
      if (savedUserData) {
        return JSON.parse(savedUserData);
      }
      
      // ì‚¬ìš©ì ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ê°’ ì„¤ì •
      const defaultUserData = {
        username: 'ì‚¬ìš©ì',
        currency: 0,
        items: []
      };
      localStorage.setItem('user', JSON.stringify(defaultUserData));
      return defaultUserData;
    }
    
    // ì‚¬ìš©ì ë°ì´í„° ì €ì¥í•˜ê¸°
    function saveUserData(userData) {
      localStorage.setItem('user', JSON.stringify(userData));
    }
    
    // í¬ë§·íŒ…ëœ ë‚ ì§œ í‚¤ ìƒì„± í•¨ìˆ˜ ì¶”ê°€
    function formatDateKey(year, month, day) {
      return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    }
    
    // ì‚¬ìš©ì ì¶œì„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ë¡œì»¬ ìŠ¤í† ë¦¬ì§€)
    function getUserAttendanceData() {
      const savedData = localStorage.getItem('attendanceData');
      
      // ì‚¬ìš©ì ë¡œê·¸ì¸ ë°ì´í„°
      const user = getUserData();
      const username = user ? user.username : 'guest';
      
      if (savedData) {
        try {
          const parsedData = JSON.parse(savedData);
          
          // ì‚¬ìš©ìë³„ ê´€ë¦¬
          if (parsedData[username]) {
            // dates ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
            if (!parsedData[username].dates) {
              parsedData[username].dates = {};
            }
            return parsedData[username];
          }
        } catch (e) {
          console.error('ì¶œì„ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜', e);
        }
      }
      
      // ê¸°ë³¸ ë°ì´í„° ìƒì„±
      return {
        streak: 0,
        lastCheckIn: null,
        dates: {}
      };
    }
    
    // ì¶œì„ ë°ì´í„° ì €ì¥
    function saveAttendanceData(data) {
      try {
        // í˜„ì¬ ì‚¬ìš©ì ì •ë³´ í™•ì¸
        const user = getUserData();
        if (!user || !user.username) {
          console.error('ì €ì¥í•  ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
          return false;
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ ìƒì„±
        const storageKey = `attendance_${user.username}`;
        
        // ì €ì¥í•  ë°ì´í„° ê°œì²´ ì¤€ë¹„
        const dataToSave = data || getUserAttendanceData();
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
        localStorage.setItem(storageKey, JSON.stringify(dataToSave));
        
        // API ì—”ë“œí¬ì¸íŠ¸ë¡œ ë°ì´í„° ì „ì†¡ (ì„œë²„ì— ì‹¤ì‹œê°„ ì €ì¥)
        sendAttendanceToServer(user.username, dataToSave);
        
        console.log('ì¶œì„ ë°ì´í„° ì €ì¥ ë° ì„œë²„ ì „ì†¡ ì™„ë£Œ:', dataToSave);
        return true;
      } catch (error) {
        console.error('ì¶œì„ ë°ì´í„° ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
        return false;
      }
    }
    
    // ì„œë²„ì— ì¶œì„ ë°ì´í„° ì „ì†¡ í•¨ìˆ˜
    function sendAttendanceToServer(username, attendanceData) {
      try {
        // ì„œë²„ì— ë°ì´í„° ì „ì†¡
        const apiUrl = '/api/attendance/save';
        
        // ì „ì†¡í•  ë°ì´í„° êµ¬ì„±
        const requestData = {
          username: username,
          attendanceData: attendanceData,
          timestamp: new Date().toISOString()
        };
        
        console.log('ì„œë²„ì— ì¶œì„ ë°ì´í„° ì „ì†¡ ì¤‘:', requestData);
        
        // Fetch APIë¥¼ í†µí•œ ë¹„ë™ê¸° ì „ì†¡
        fetch(apiUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(requestData)
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Server response was not ok');
          }
          return response.json();
        })
        .then(data => {
          console.log('ì¶œì„ ë°ì´í„° ì„œë²„ ì €ì¥ ì„±ê³µ:', data);
        })
        .catch(error => {
          console.error('ì¶œì„ ë°ì´í„° ì„œë²„ ì €ì¥ ì‹¤íŒ¨:', error);
          // ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
          setTimeout(() => {
            console.log('ì„œë²„ ì €ì¥ ì¬ì‹œë„ ì˜ˆì•½...');
            // ì¬ì‹œë„ ë¡œì§ì€ ì˜ˆì‹œë¡œ ì£¼ì„ ì²˜ë¦¬
            // retryServerSave(username, attendanceData);
          }, 30000); // 30ì´ˆ í›„ ì¬ì‹œë„
        });
      } catch (error) {
        console.error('ì„œë²„ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
      }
    }
    
    // ì¶œì„ ë°ì´í„°
    let attendanceData = getUserAttendanceData();
    
    // ì¶œì„ì²´í¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
    function initializeAttendanceSystem() {
      // ì—°ë„ ì„ íƒ ìƒì ì´ˆê¸°í™”
      populateYearOptions();
      
      // ì—°ë„/ì›” ì„ íƒ ìƒì ê°’ ì„¤ì •
      document.getElementById('yearSelect').value = currentYear;
      
      // ìº˜ë¦°ë” ìƒì„±
      generateCalendar(currentYear, currentMonth);
      
      // ì—°ì† ì¶œì„ í‘œì‹œ
      document.getElementById('streakCount').textContent = attendanceData.streak;
      
      // ì¶œì„ì²´í¬ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      const checkInButton = document.getElementById('checkInButton');
      if (checkInButton) {
        checkInButton.addEventListener('click', function() {
          console.log('ì¶œì„ì²´í¬ ë²„íŠ¼ í´ë¦­ë¨');
          checkAttendance();
        });
      } else {
        console.error('ì¶œì„ì²´í¬ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
      }
      
      // ë‹¬ë ¥ íƒìƒ‰ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
      setupCalendarNavigationListeners();
    }
    
    // ì—°ë„ ì„ íƒ ìƒì ì˜µì…˜ ì¶”ê°€
    function populateYearOptions() {
      const yearSelect = document.getElementById('yearSelect');
      yearSelect.innerHTML = '';
      
      const currentYear = new Date().getFullYear();
      for (let year = currentYear - 2; year <= currentYear + 2; year++) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = `${year}ë…„`;
        yearSelect.appendChild(option);
      }
    }
    
    // ë‹¬ë ¥ íƒìƒ‰ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    function setupCalendarNavigationListeners() {
      // ì´ì „ ë‹¬ ë²„íŠ¼
      document.getElementById('prevMonth').addEventListener('click', function() {
        console.log('ì´ì „ ë‹¬ ë²„íŠ¼ í´ë¦­');
        currentMonth--;
        if (currentMonth < 0) {
          currentMonth = 11;
          currentYear--;
        }
        console.log('ë³€ê²½ í›„ ì—°ë„/ì›”:', currentYear, currentMonth);
        generateCalendar(currentYear, currentMonth);
        updateMonthYearDisplay();
      });
      
      // ë‹¤ìŒ ë‹¬ ë²„íŠ¼
      document.getElementById('nextMonth').addEventListener('click', function() {
        console.log('ë‹¤ìŒ ë‹¬ ë²„íŠ¼ í´ë¦­');
        currentMonth++;
        if (currentMonth > 11) {
          currentMonth = 0;
          currentYear++;
        }
        console.log('ë³€ê²½ í›„ ì—°ë„/ì›”:', currentYear, currentMonth);
        // ë‹¤ìŒ ë‹¬ ë²„íŠ¼ì—ì„œëŠ” generateCalendar ì™€ updateMonthYearDisplay í˜¸ì¶œ
        generateCalendar(currentYear, currentMonth);
        updateMonthYearDisplay();
      });
      
      // ì—°ë„ ì„ íƒ ìƒì ë³€ê²½ ì´ë²¤íŠ¸
      document.getElementById('yearSelect').addEventListener('change', function() {
        console.log('ì—°ë„ ì„ íƒ ë³€ê²½');
        currentYear = parseInt(this.value);
        // ë§í¬/ì„ íƒë°•ìŠ¤ ë³€ê²½ ì‹œ ë˜í•œ generateCalendar í˜¸ì¶œ
        generateCalendar(currentYear, currentMonth);
        updateMonthYearDisplay();
      });
      
      // ì›” ì„ íƒ ìƒì ë³€ê²½ ì´ë²¤íŠ¸
      document.getElementById('monthSelect').addEventListener('change', function() {
        console.log('ì›” ì„ íƒ ë³€ê²½');
        currentMonth = parseInt(this.value);
        // ë§í¬/ì„ íƒë°•ìŠ¤ ë³€ê²½ ì‹œ ë˜í•œ generateCalendar í˜¸ì¶œ
        generateCalendar(currentYear, currentMonth);
        updateMonthYearDisplay();
      });
    }
    
    // ìº˜ë¦°ë” ì—…ë°ì´íŠ¸ - ì´ í•¨ìˆ˜ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ (generateCalendarë¡œ ëŒ€ì²´)
    function updateCalendar() {
      console.log('updateCalendar í˜¸ì¶œ - ì´ í•¨ìˆ˜ëŒ€ì‹  generateCalendar ì‚¬ìš©');
      // generateCalendarë¡œ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ë„ë¡ ìˆ˜ì •
      generateCalendar(currentYear, currentMonth);
      updateMonthYearDisplay();
    }
    
    // ì„ íƒí•œ ì—°ë„ì™€ ì›”ì— ë”°ë¼ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateMonthYearDisplay() {
      // ì„ íƒ ìƒì ê°’ ì—…ë°ì´íŠ¸
      document.getElementById('yearSelect').value = currentYear;
      document.getElementById('monthSelect').value = currentMonth;
      
      // í˜„ì¬ ì›” í‘œì‹œ ì—…ë°ì´íŠ¸
      document.getElementById('currentMonth').textContent = `${currentYear}ë…„ ${currentMonth + 1}ì›”`;
      
      // ìº˜ë¦°ë” ì¬ìƒì„±
      generateCalendar(currentYear, currentMonth);
    }
    
    // ìº˜ë¦°ë” ìƒì„± í•¨ìˆ˜
    function generateCalendar(year, month) {
      console.log('generateCalendar í˜¸ì¶œ:', year, month);
      const calendarBody = document.getElementById('calendarBody');
      if (!calendarBody) {
        console.error('calendarBody ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        return;
      }
      
      calendarBody.innerHTML = '';
      
      // í•´ë‹¹ ì›”ì˜ ì²« ë‚ ê³¼ ë§ˆì§€ë§‰ ë‚ 
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      
      // ì²« ì£¼ ì‹œì‘ ê³µë°± ê³„ì‚° (ì¼ìš”ì¼: 0, í† ìš”ì¼: 6)
      const firstDayOfWeek = firstDay.getDay();
      
      // í•´ë‹¹ ì›”ì˜ ì´ ë‚ ì§œ ìˆ˜
      const daysInMonth = lastDay.getDate();
      console.log('ì´ë²ˆ ë‹¬ ì´ ë‚ ì§œ:', daysInMonth);
      
      // ì´ì „ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ì§œ êµ¬í•˜ê¸°
      const prevMonthLastDay = new Date(year, month, 0).getDate();
      
      // í˜„ì¬ í–‰ ì´ˆê¸°í™”
      let currentRow = document.createElement('tr');
      let date = 1;
      let dayCount = 0;
      
      console.log('ì²« ë‚  ìš”ì¼:', firstDayOfWeek);
      
      // ì´ì „ ë‹¬ ë‚ ì§œ ì±„ìš°ê¸°
      for (let i = 0; i < firstDayOfWeek; i++) {
        const prevDate = prevMonthLastDay - firstDayOfWeek + i + 1;
        const cell = document.createElement('td');
        cell.className = 'other-month';
        if (i === 0) cell.classList.add('sun');
        if (i === 6) cell.classList.add('sat');
        
        cell.innerHTML = `<span class="date-number">${prevDate}</span>`;
        currentRow.appendChild(cell);
        dayCount++;
      }
      
      // í˜„ì¬ ë‹¬ ë‚ ì§œ ì±„ìš°ê¸°
      while (date <= daysInMonth) {
        // ìƒˆë¡œìš´ ì£¼ ì‹œì‘
        if (dayCount === 7) {
          calendarBody.appendChild(currentRow);
          currentRow = document.createElement('tr');
          dayCount = 0;
        }
        
        const cell = document.createElement('td');
        const dayOfWeek = dayCount;
        
        // ìš”ì¼ì— ë”°ë¥¸ í´ë˜ìŠ¤ ì¶”ê°€
        if (dayOfWeek === 0) cell.classList.add('sun');
        if (dayOfWeek === 6) cell.classList.add('sat');
        
        // ì…€ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì¶”ê°€ - ëª¨ë“  ì…€ ë™ì¼í•œ í¬ê¸°ë¡œ ì„¤ì •
        cell.style.width = '100px';
        cell.style.height = '100px';
        cell.style.textAlign = 'center';
        cell.style.verticalAlign = 'middle';
        cell.style.border = '1px solid #eaeaea';
        cell.style.position = 'relative';
        cell.style.cursor = 'pointer';
        
        // í˜„ì¬ ë‚ ì§œì¸ì§€ í™•ì¸
        if (year === today.getFullYear() && month === today.getMonth() && date === today.getDate()) {
          cell.classList.add('today');
          cell.style.backgroundColor = '#e3f2fd';
          cell.style.fontWeight = 'bold';
          cell.style.borderRadius = '4px';
        }
        
        // ë‚ ì§œ í‘œì‹œ - ì™¼ìª½ ìƒë‹¨ì— ë°°ì¹˜ (ì‚¬ìš©ì ìš”ì²­ì‚¬í•­)
        const dateSpan = document.createElement('span');
        dateSpan.textContent = date;
        dateSpan.className = 'date-number';
        dateSpan.style.position = 'absolute';
        dateSpan.style.top = '5px';
        dateSpan.style.left = '10px';
        dateSpan.style.fontSize = '16px';
        dateSpan.style.fontWeight = 'normal';
        dateSpan.style.color = (dayOfWeek === 0) ? '#e53935' : (dayOfWeek === 6 ? '#1e88e5' : '#333');
        cell.appendChild(dateSpan);
        
        // ì¶œì„ì²´í¬ í–ˆëŠ”ì§€ í™•ì¸
        const dateKey = formatDateKey(year, month, date);
        console.log('ë‚ ì§œ í™•ì¸:', dateKey, attendanceData.dates && attendanceData.dates[dateKey] ? 'ì¶œì„ O' : 'ì¶œì„ X');
        
        if (attendanceData.dates && attendanceData.dates[dateKey]) {
          // ì²´í¬í‘œì‹œ (ê°€ìš´ë° ë°°ì¹˜)
          const checkmark = document.createElement('div');
          checkmark.className = 'attendance-check';
          checkmark.innerHTML = 'âœ“'; // ì²´í¬ë§ˆí¬ ë¬¸ì
          checkmark.style.position = 'absolute';
          checkmark.style.top = '50%';
          checkmark.style.left = '50%';
          checkmark.style.transform = 'translate(-50%, -50%)';
          checkmark.style.fontSize = '32px';
          checkmark.style.fontWeight = 'bold';
          checkmark.style.color = '#4caf50';
          cell.appendChild(checkmark);
          
          // ì¶œì„í•œ ë‚ ì€ ë°°ê²½ìƒ‰ ë³€ê²½
          cell.style.backgroundColor = '#e8f5e9';
        }
        
        currentRow.appendChild(cell);
        
        date++;
        dayCount++;
      }
      
      // ë‹¤ìŒ ë‹¬ ë‚ ì§œ ì±„ìš°ê¸°
      if (dayCount > 0) {
        for (let i = dayCount; i < 7; i++) {
          const cell = document.createElement('td');
          cell.className = 'other-month';
          if (i === 0) cell.classList.add('sun');
          if (i === 6) cell.classList.add('sat');
          
          cell.innerHTML = `<span class="date-number">${i - dayCount + 1}</span>`;
          currentRow.appendChild(cell);
        }
        calendarBody.appendChild(currentRow);
      }
    }
    
    // ì¶œì„ì²´í¬ í•¨ìˆ˜
    function checkAttendance() {
      console.log('ì¶œì„ì²´í¬ í•¨ìˆ˜ ì‹¤í–‰');
      
      // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
      const user = getUserData();
      if (!user || !user.username) {
        alert('ì¶œì„ì²´í¬ë¥¼ ìœ„í•´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        return;
      }
      
      // ì¶œì„ ë°ì´í„° ìƒˆë¡œ ê°€ì ¸ì˜¤ê¸° (ìµœì‹  ìƒíƒœ í™•ì¸)
      attendanceData = getUserAttendanceData();
      
      // ì˜¤ëŠ˜ ë‚ ì§œ ìƒì„±
      const today = new Date();
      const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
      console.log('ì˜¤ëŠ˜ ë‚ ì§œ:', todayStr);
      
      // dates ê°ì²´ í™•ì¸ ë° ì´ˆê¸°í™”
      if (!attendanceData.dates) {
        attendanceData.dates = {};
      }
      
      // ì´ë¯¸ ì¶œì„ì²´í¬ í–ˆëŠ”ì§€ í™•ì¸
      if (attendanceData.dates[todayStr]) {
        alert('ì˜¤ëŠ˜ì€ ì´ë¯¸ ì¶œì„ì²´í¬ë¥¼ í•˜ì…¨ìŠµë‹ˆë‹¤!');
        return;
      }
      
      // ì´ì „ ì²´í¬ì¸ ë‚ ì§œì™€ ì—°ì†ì„± í™•ì¸
      const lastCheckDate = attendanceData.lastCheckIn;
      const yesterday = new Date(today);
      yesterday.setDate(yesterday.getDate() - 1);
      const yesterdayStr = `${yesterday.getFullYear()}-${String(yesterday.getMonth() + 1).padStart(2, '0')}-${String(yesterday.getDate()).padStart(2, '0')}`;
      
      console.log('ë§ˆì§€ë§‰ ì¶œì„ì¼:', lastCheckDate, 'ì–´ì œ:', yesterdayStr);
      
      // ì¶œì„ ì—°ì†ì„± í™•ì¸ (ì–´ì œ ì²´í¬ì¸ í–ˆëŠ”ì§€)
      if (lastCheckDate === yesterdayStr) {
        // ì—°ì† ì¶œì„ ìœ ì§€
        attendanceData.streak++;
      } else {
        // ì—°ì†ì„± ëˆê¹€ (ì²˜ìŒì´ê±°ë‚˜ í•˜ë£¨ë¥¼ ê±´ë„ˆë›´ ê²½ìš°)
        attendanceData.streak = 1;
      }
      
      // ì¶œì„ì²´í¬ ì €ì¥ (ê°ì²´í˜•íƒœë¡œ ë³€ê²½)
      if (!attendanceData.dates) {
        attendanceData.dates = {};
      }
      attendanceData.dates[todayStr] = true;
      attendanceData.lastCheckIn = todayStr;
      
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
      saveAttendanceData(attendanceData);
      
      // UI ì—…ë°ì´íŠ¸
      document.getElementById('streakCount').textContent = attendanceData.streak;
      
      // ìº˜ë¦°ë” ì¬ìƒì„± (ì¶œì„ì²´í¬ í‘œì‹œ ì—…ë°ì´íŠ¸)
      generateCalendar(currentYear, currentMonth);
      
      // ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      let userData = getUserData();
      
      // ë³´ìƒ ë¶„ë¥˜ ë° ë©”ì‹œì§€ ê²°ì •
      let rewardTitle = 'ë§¤ì¼ ì¶œì„ ë³´ìƒ';
      let rewardDesc = 'ì¬í™” +100,000';
      let rewardIcon = 'â­'; // ë³„ ì´ëª¨í‹°ì½˜
      let rewardPoints = 100000; // ê¸°ë³¸ ë³´ìƒ ì¬í™”
      
      // íŠ¹ë³„ ë³´ìƒ í™•ì¸
      if (attendanceData.streak === 7) {
        rewardTitle = '7ì¼ ì—°ì† ì¶œì„ ë³´ìƒ';
        rewardPoints = 200000;
        rewardDesc = 'ì¬í™” +200,000 + ëœë¤ ì¬í™” ë°•ìŠ¤';
        rewardIcon = 'ğŸ'; // ì„ ë¬¼ ì´ëª¨í‹°ì½˜
        
        // ëœë¤ ì¬í™” ë°•ìŠ¤ ë³´ìƒ ì¶”ê°€
        const randomBoxReward = getRandomBoxReward();
        rewardPoints += randomBoxReward;
        console.log('ëœë¤ ì¬í™” ë°•ìŠ¤ ë³´ìƒ:', randomBoxReward);
      } else if (attendanceData.streak === 15) {
        rewardTitle = '15ì¼ ì—°ì† ì¶œì„ ë³´ìƒ';
        rewardPoints = 300000;
        rewardDesc = 'ì¬í™” +300,000 + ëœë¤ ì¬í™” ë°•ìŠ¤';
        rewardIcon = 'ğŸ'; // ì„ ë¬¼ ì´ëª¨í‹°ì½˜
        
        // ëœë¤ ì¬í™” ë°•ìŠ¤ ë³´ìƒ ì¶”ê°€
        const randomBoxReward = getRandomBoxReward();
        rewardPoints += randomBoxReward;
        console.log('ëœë¤ ì¬í™” ë°•ìŠ¤ ë³´ìƒ:', randomBoxReward);
      } else if (attendanceData.streak === 30) {
        rewardTitle = '30ì¼ ì—°ì† ì¶œì„ ë³´ìƒ';
        rewardPoints = 500000;
        rewardDesc = 'ì¬í™” +500,000 + ëœë¤ ì¬í™” ë°•ìŠ¤';
        rewardIcon = 'ğŸ'; // ì„ ë¬¼ ì´ëª¨í‹°ì½˜
        
        // ëœë¤ ì¬í™” ë°•ìŠ¤ ë³´ìƒ ì¶”ê°€
        const randomBoxReward = getRandomBoxReward();
        rewardPoints += randomBoxReward;
        console.log('ëœë¤ ì¬í™” ë°•ìŠ¤ ë³´ìƒ:', randomBoxReward);
      }
      
      // ì‚¬ìš©ì ì¬í™” ì—…ë°ì´íŠ¸
      userData.currency = (userData.currency || 0) + rewardPoints;
      console.log('ì¬í™” ì—…ë°ì´íŠ¸:', userData.currency);
      
      // ì‚¬ìš©ì ë°ì´í„° ì €ì¥
      saveUserData(userData);
      
      }
      
      // ëœë¤ ì¬í™” ìƒì í™•ë¥  ê³„ì‚° í•¨ìˆ˜
      function getRandomBoxReward() {
        const random = Math.random() * 100;
        if (random < 40) { // 40% í™•ë¥ 
          return 100000;
        } else if (random < 70) { // 30% í™•ë¥ 
          return 200000;
        } else if (random < 90) { // 20% í™•ë¥ 
          return 300000;
        } else if (random < 99) { // 9% í™•ë¥ 
          return 400000;
        } else { // 1% í™•ë¥ 
          return 500000;
        }
      }
      
      // ì»¤ìŠ¤í…€ ì•Œë¦¼ í‘œì‹œ (ëª¨ë‹¬ í˜•íƒœ)
      showRewardAlert(rewardTitle, rewardDesc, rewardIcon);
    
    
    // ë³´ìƒ ì•Œë¦¼ í•¨ìˆ˜
    function showRewardAlert(title, desc, icon) {
      // ê¸°ì¡´ ëª¨ë‹¬ì´ ìˆë‹¤ë©´ ì œê±°
      const existingModal = document.getElementById('rewardModal');
      if (existingModal) {
        existingModal.remove();
      }
      
      // ëª¨ë‹¬ ìƒì„±
      const modal = document.createElement('div');
      modal.id = 'rewardModal';
      modal.style.position = 'fixed';
      modal.style.top = '0';
      modal.style.left = '0';
      modal.style.right = '0';
      modal.style.bottom = '0';
      modal.style.backgroundColor = 'rgba(0,0,0,0.5)';
      modal.style.display = 'flex';
      modal.style.alignItems = 'center';
      modal.style.justifyContent = 'center';
      modal.style.zIndex = '1000';
      
      // ëª¨ë‹¬ ì»¨í…ì¸  ìƒì„±
      const content = document.createElement('div');
      content.style.backgroundColor = 'white';
      content.style.borderRadius = '8px';
      content.style.padding = '20px';
      content.style.width = '300px';
      content.style.maxWidth = '90%';
      content.style.textAlign = 'center';
      content.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
      
      // ì•„ì´ì½˜ ì¶”ê°€
      const iconElem = document.createElement('div');
      iconElem.className = 'modal-icon';
      iconElem.style.fontSize = '36px';  // í¬ê¸° ì œí•œ
      iconElem.style.margin = '0 0 15px 0';
      iconElem.textContent = icon;
      content.appendChild(iconElem);
      
      // ì œëª© ì¶”ê°€
      const titleElem = document.createElement('h3');
      titleElem.style.margin = '0 0 10px 0';
      titleElem.style.color = '#4569d4';
      titleElem.style.fontSize = '18px';
      titleElem.textContent = title;
      content.appendChild(titleElem);
      
      // ë‚´ìš© ì¶”ê°€
      const descElem = document.createElement('p');
      descElem.style.margin = '0 0 20px 0';
      descElem.style.color = '#333';
      descElem.textContent = `ì¶œì„ì²´í¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
ë³´ìƒ: ${desc}`;
      content.appendChild(descElem);
      
      // ë²„íŠ¼ ì¶”ê°€
      const button = document.createElement('button');
      button.style.backgroundColor = '#4569d4';
      button.style.color = 'white';
      button.style.border = 'none';
      button.style.padding = '10px 20px';
      button.style.borderRadius = '4px';
      button.style.cursor = 'pointer';
      button.style.fontSize = '14px';
      button.textContent = 'í™•ì¸';
      button.onclick = function() {
        modal.remove();
      };
      content.appendChild(button);
      
      // ëª¨ë‹¬ ì¶”ê°€
      modal.appendChild(content);
      document.body.appendChild(modal);
    }
    
    // ì¼ë°˜ ì•Œë¦¼ í•¨ìˆ˜
    function showCustomAlert(message, isSuccess = true) {
      // ê¸°ì¡´ ì•Œë¦¼ì´ ìˆë‹¤ë©´ ì œê±°
      const existingAlert = document.getElementById('customAlert');
      if (existingAlert) {
        existingAlert.remove();
      }
      
      // ì•Œë¦¼ ìƒì„±
      const alertBox = document.createElement('div');
      alertBox.id = 'customAlert';
      alertBox.style.position = 'fixed';
      alertBox.style.top = '20px';
      alertBox.style.left = '50%';
      alertBox.style.transform = 'translateX(-50%)';
      alertBox.style.backgroundColor = isSuccess ? '#4caf50' : '#f44336';
      alertBox.style.color = 'white';
      alertBox.style.padding = '12px 24px';
      alertBox.style.borderRadius = '4px';
      alertBox.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2)';
      alertBox.style.zIndex = '1000';
      alertBox.style.minWidth = '200px';
      alertBox.style.textAlign = 'center';
      alertBox.textContent = message;
      
      // ë¬¸ì„œì— ì¶”ê°€
      document.body.appendChild(alertBox);
      
      // 3ì´ˆ í›„ ì‚­ì œ
      setTimeout(() => {
        alertBox.remove();
      }, 3000);
    }
  </script>
</body>
</html>
